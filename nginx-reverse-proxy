##########################
inside conf.d, create two folders: sites-available and sites-enabled. Navigate into sites-available and create conf files like:

site.conf

upstream test {
  server        test:3000;
}

server {
  listen        80;
  server_name   test.example.com;

  location / {
    proxy_pass  http://test:3000;
  }
}

Create a symlink:

ln -s ../sites-available/* /sites-enabled

Change nginx.conf for include all files in conf.d:

include /etc/nginx/conf.d/*.conf;

##########################

Docker-compose


version: '3'

services:
  reverse:
    container_name: reverse
    hostname: reverse
    image: nginx
    ports:
      - 80:80
    volumes:
      - /home/ubuntu/reverse-nginx/config:/etc/nginx

